services:
  gitea:
    image: gitea/gitea:latest
    container_name: gitea
    restart: unless-stopped
    labels:
      - "com.centurylinklabs.watchtower.enable=false"
    environment:
      - TZ=Europe/Berlin
      - GITEA__server__ROOT_URL=http://${HOSTNAME}:443/
      - GITEA__server__HTTP_PORT=80
      - GITEA__server__REDIRECT_OTHER_PORT=false   # ‚Üê verhindert 302 auf :80
      - GITEA__server__SSH_DOMAIN=${HOSTNAME}
      - GITEA__server__DOMAIN=${HOSTNAME}
      - GITEA__server__SSH_PORT=30022
    expose:
      - "30080"
    volumes:
      - gitea-data:/data
volumes:
  gitea-data: